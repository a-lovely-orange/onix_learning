# 主引导扇区

## BIOS(Basic Input Output System)

BIOS加电自检

通电之后，BIOS会检查计算机硬件功能是否完整，若完整，则将主引导扇区读到内存中0x7c00的位置，并跳转到这里执行。

    int 0x10 ; BIOS系统调用，显示器相关功能

## 实模式（8086模式）

必须通过保护模式才能进入实模式

- Real Mode
- Protected Mode

```s
mov ax, 0xb800
mov ds, ax
mov byte [0], 'H'
```
## 实模式的寻址方式

> 有效地址 = 段地址 * 16 + 偏移地址

EA = 0Xb800 * 0x10(16) + 0 = 0xb8000

EA : Effective Address

寄存器为16位，而实模式需要访问的内存大小为1MB，即20位地址线

保护模式时，寄存器变为32位，32位可以访问的地址空间为4GB，此时段地址在实模式中的功能在保护模式中不再有用

## 主引导扇区的结构

主引导扇区——一个扇区大小：512字节

其中，
- 代码占446B
- 硬盘分区表：64B = 4 * 16B（4个主分区，一个主分区16B）
- 魔数：2B - （0xaa55 / 0x55, 0xaa）

## 主引导扇区的功能

读取内核加载器，并执行
内核加载器在硬盘里，因此主引导扇区需要读取硬盘